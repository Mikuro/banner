openapi: "3.0.3"
info:
  title: "Promo Banner Service API"
  description: "API –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ–º–æ-–±–∞–Ω–Ω–µ—Ä–æ–≤ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö"
  version: "1.0.0"
servers:
  - url: "http://45.8.228.89/"
paths:
  /:
    get:
      summary: "Health check"
      description: "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞"
      responses:
        "200":
          description: "OK"
          content:
            text/plain:
              schema:
                type: "string"
              example: "–ü—Ä–æ–º–æ-—Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç! üöÄ"
  /upload:
    post:
      summary: "–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"
      description: "–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç ID –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è"
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                image:
                  type: string
                  format: binary
                  description: "–§–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"
              required:
                - image
      responses:
        "200":
          description: "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UploadResponse"
        "400":
          description: "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –≤ –∑–∞–ø—Ä–æ—Å–µ"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UploadResponse"
        "500":
          description: "–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UploadResponse"
  /link/{imageId}:
    get:
      summary: "–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ"
      description: "–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç presigned URL –¥–ª—è –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é"
      parameters:
        - name: imageId
          in: path
          required: true
          schema:
            type: string
          description: "–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"
      responses:
        "200":
          description: "–°—Å—ã–ª–∫–∞ —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LinkResponse"
        "404":
          description: "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LinkResponse"
        "500":
          description: "–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Å—ã–ª–∫–∏"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LinkResponse"
  /html-embed/{imageId}:
    get:
      summary: "HTML —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º"
      description: "–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTML —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º, –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –∫–∞–∫ base64"
      parameters:
        - name: imageId
          in: path
          required: true
          schema:
            type: string
          description: "–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"
      responses:
        "200":
          description: "HTML —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HtmlResponse"
        "404":
          description: "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HtmlResponse"
        "500":
          description: "–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ HTML"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HtmlResponse"
  /html-link/{imageId}:
    get:
      summary: "HTML —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ"
      description: "–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTML —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –ø–æ –≤–Ω–µ—à–Ω–µ–π —Å—Å—ã–ª–∫–µ"
      parameters:
        - name: imageId
          in: path
          required: true
          schema:
            type: string
          description: "–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"
      responses:
        "200":
          description: "HTML —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HtmlResponse"
        "404":
          description: "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HtmlResponse"
        "500":
          description: "–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ HTML"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HtmlResponse"
  /preview/{imageId}:
    get:
      summary: "–ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"
      description: "–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞"
      parameters:
        - name: imageId
          in: path
          required: true
          schema:
            type: string
          description: "–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"
      responses:
        "200":
          description: "HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º"
          content:
            text/html:
              schema:
                type: string
        "404":
          description: "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"
          content:
            text/plain:
              schema:
                type: string
        "500":
          description: "–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞"
          content:
            text/plain:
              schema:
                type: string
components:
  schemas:
    UploadResponse:
      type: object
      properties:
        success:
          type: boolean
          description: "–°—Ç–∞—Ç—É—Å –æ–ø–µ—Ä–∞—Ü–∏–∏"
        imageId:
          type: string
          nullable: true
          description: "ID –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"
        message:
          type: string
          nullable: true
          description: "–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –∏–ª–∏ —É—Å–ø–µ—Ö–µ"
      required:
        - success
    LinkResponse:
      type: object
      properties:
        success:
          type: boolean
          description: "–°—Ç–∞—Ç—É—Å –æ–ø–µ—Ä–∞—Ü–∏–∏"
        imageUrl:
          type: string
          nullable: true
          description: "URL –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é"
        message:
          type: string
          nullable: true
          description: "–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –∏–ª–∏ —É—Å–ø–µ—Ö–µ"
      required:
        - success
    HtmlResponse:
      type: object
      properties:
        success:
          type: boolean
          description: "–°—Ç–∞—Ç—É—Å –æ–ø–µ—Ä–∞—Ü–∏–∏"
        html:
          type: string
          nullable: true
          description: "Base64-–∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π HTML"
        message:
          type: string
          nullable: true
          description: "–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –∏–ª–∏ —É—Å–ø–µ—Ö–µ"
      required:
        - success